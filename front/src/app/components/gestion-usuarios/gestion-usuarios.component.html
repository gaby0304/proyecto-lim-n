<div class="container">

  <button class="back-button" (click)="goBack()">←</button>
  <div class="card">

    <h2>Gestión de Usuarios</h2>

    <div class="user-search">
      <div class="user-icon">👤</div>
      <input type="text" placeholder="Usuario" [(ngModel)]="userSearch" />
      <button (click)="searchUser()" [disabled]="loading">Buscar</button>
    </div>

    <div *ngIf="loading" class="loading-spinner">🔄 Buscando usuario...</div>

    <div class="form" *ngIf="userLoaded">

      <!-- Campo Nombre Completo (Deshabilitado) -->
      <div class="form-group">
        <label for="name">Nombre Completo:</label>
        <input type="text" id="name" [value]="user.name" disabled class="form-control" />
      </div>

      <!-- Campo Correo (Deshabilitado) -->
      <div class="form-group">
        <label for="email">Correo:</label>
        <input type="email" id="email" [value]="user.email" disabled class="form-control" />
      </div>

      <!-- Campo Rol (Editable) -->
      <div class="form-group">
        <label for="roleSelect">Rol:</label>
        <select id="roleSelect" [(ngModel)]="user.role" aria-label="Selecciona un rol" class="form-control">
          <option *ngFor="let role of roles" [ngValue]="role.value">
            {{ role.label }}
          </option>
        </select>
      </div>

      <button (click)="saveChanges()" class="btn btn-primary">Guardar cambios</button>
    </div>

    <!-- Modal de Error -->
    <div *ngIf="errorMessage" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeErrorModal()">&times;</span>
        <p>{{ errorMessage }}</p>
      </div>
    </div>

  </div>
</div>